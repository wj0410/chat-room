<template>
  <div class="chatView no-copy">
    <headView :headProp="chatViewProp.headProp" />
    <div class="chat-message-area">
      <div class="chat-content">
        <template v-for="(item, index) in chatViewProp.MessagePropList" :key="index">
          <div :class="msgStyle(item)" v-if="item.type === 'normal'">
            <div class="head-img">
              <img class="avatar" :src="item.avatar" />
            </div>
            <div>
              <div class="nick-name"
                v-if="chatViewProp.chatType !== ChatType.PRIVATE && item.username !== userStore.loginUser?.username">
                {{ item.nickName }}
              </div>
              <span class="content">{{ item.msg }}</span>
            </div>
          </div>
          <div v-if="item.type === 'prompt'" class="prompt">{{ item.timestamp }} {{ item.nickName }} {{ item.msg }}
          </div>
        </template>
      </div>
      <div class="new-message">
        <svg t="1700206635508" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="2462" width="200" height="200">
          <path
            d="M500.408996 544.70045c3.684558 3.684558 8.674063 5.757121 13.893853 5.757121 5.21979 0 10.209295-2.072564 13.893853-5.757121L717.567616 355.406297c7.676162-7.676162 7.676162-20.111544 0-27.787706-7.676162-7.676162-20.111544-7.676162-27.787706 0L514.302849 503.018891 333.682759 322.398801c-7.676162-7.676162-20.111544-7.676162-27.787707 0-7.676162 7.676162-7.676162 20.111544 0 27.787706l194.513944 194.513943z m189.370914-59.874063L514.302849 660.303448 333.682759 479.606597c-7.676162-7.676162-20.111544-7.676162-27.787707 0-7.676162 7.676162-7.676162 20.111544 0 27.787706l194.513944 194.513943c3.684558 3.684558 8.674063 5.757121 13.893853 5.757121 5.21979 0 10.209295-2.072564 13.893853-5.757121l189.370914-189.370915c4.989505-4.989505 6.908546-12.205097 5.066267-18.96012-1.842279-6.755022-7.138831-12.051574-13.893853-13.893853-6.755022-1.765517-13.970615 0.153523-18.96012 5.143029z m0 0"
            fill="#03C160" p-id="2463"></path>
        </svg>
        <span>1</span>条新消息
      </div>
      <div class="offline">
        <span class="warn">
          <svg t="1700553137490" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="10472" width="16" height="16">
            <path
              d="M969.182003 701.303054C942.98583 761.818425 907.560805 814.394635 862.909139 859.030351 818.273423 903.682017 765.86402 939.121773 705.727336 965.303215 645.576031 991.515341 581.182839 1004.606061 512.545547 1004.606061 443.925315 1004.606061 379.349482 991.515341 318.818158 965.303215 258.302785 939.121773 205.726577 903.682017 161.090861 859.030351 116.439196 814.393527 80.999438 761.818425 54.817996 701.303054 28.605873 640.772838 15.515152 576.197117 15.515152 507.575665 15.515152 438.938373 28.605873 374.545181 54.817996 314.393878 80.999438 254.257304 116.439196 201.8479 161.090861 157.212073 205.726577 112.560409 258.302785 77.135381 318.818158 50.939208 379.349482 24.743034 443.925203 11.636364 512.545547 11.636364 581.182839 11.636364 645.576031 24.742924 705.727336 50.939208 765.8628 77.1366 818.273311 112.560409 862.909139 157.212073 907.560805 201.848897 942.984611 254.258412 969.182003 314.393878 995.378179 374.545181 1008.484848 438.938373 1008.484848 507.575665 1008.484848 576.197117 995.379287 640.772838 969.182003 701.303054L969.182003 701.303054Z"
              fill="#FF2E00" p-id="10473"></path>
            <path
              d="M512 709.220647C472.332325 709.220647 440.203301 741.349668 440.203301 781.017346 440.203301 820.68502 472.332325 852.814044 512 852.814044 551.667675 852.814044 583.796699 820.68502 583.796699 781.017346 583.796699 741.349668 551.667675 709.220647 512 709.220647L512 709.220647Z"
              fill="#FFFFFF" p-id="10474"></path>
            <path
              d="M512 639.709091C492.184111 639.709091 476.101651 606.196596 476.101651 564.820837L440.203301 227.823683C440.203301 186.447921 472.332325 152.935427 512 152.935427 551.667675 152.935427 583.796699 186.447921 583.796699 227.823683L547.898349 564.820837C547.898349 606.196596 531.815889 639.709091 512 639.709091L512 639.709091Z"
              fill="#FFFFFF" p-id="10475"></path>
          </svg>
        </span>
        <span>当前网络不可用，需检查你的网络设置</span>
      </div>
    </div>
    <div class="chat-send-area">
      <div class="chat-send-tool-area">
        <div class="chat-send-tool-left">
          <ul>
            <li>
              <svg id="emoji" @click="showEmoji" t="1700469337502" class="icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="30613" width="200" height="200">
                <path
                  d="M512 959.1c-114.6 0-229.1-43.6-316.3-130.9-174.3-174.4-174.2-458.1 0.2-632.4C298.7 93 445.6 46.6 589 71.5c14.3 2.5 23.9 16.1 21.4 30.4-2.5 14.3-16.1 23.9-30.4 21.4-126.5-22-256.2 19-347 109.7-153.9 153.8-154 404.2-0.2 558.1 153.8 153.9 404.2 154 558.1 0.2s154-404.2 0.2-558.2c-15.4-15.4-32-29.5-49.6-42.1-11.8-8.5-14.5-24.9-6-36.7 8.5-11.8 24.9-14.5 36.7-6 19.8 14.2 38.7 30.3 56.1 47.7 174.3 174.4 174.2 458.1-0.2 632.5-87.1 87-201.6 130.6-316.1 130.6z"
                  p-id="30614"></path>
                <path d="M312.8 410.7m-42.8 0a42.8 42.8 0 1 0 85.6 0 42.8 42.8 0 1 0-85.6 0Z" p-id="30615"></path>
                <path d="M715.6 410.9m-42.5 0a42.5 42.5 0 1 0 85 0 42.5 42.5 0 1 0-85 0Z" p-id="30616"></path>
                <path d="M281.1 553.2v0.4c0 127.5 103.3 231 230.9 231s231-103.3 231-230.9v-0.4l-461.9-0.1z"
                  fill="#FFA786" p-id="30617"></path>
                <path
                  d="M512 810.9s-0.1 0 0 0c-141.9 0-257.3-115.5-257.2-257.3 0-7.9 3.2-26.2 32.7-26.3h82.4c67.1 0 160.4 0 236.9 0.1l133.6 0.1c28.6 0.1 28.9 26 28.9 26.3-0.1 141.7-115.5 257.1-257.3 257.1zM309 579.8c12.9 100.5 99 178.5 202.9 178.5h0.1c103.9 0 190-77.9 203-178.4-82.1 0-324-0.1-406-0.1z"
                  p-id="30618"></path>
                <path d="M673.4 124.4m-26.3 0a26.3 26.3 0 1 0 52.6 0 26.3 26.3 0 1 0-52.6 0Z" fill="#FFA786"
                  p-id="30619">
                </path>
              </svg>

              <div class="tool-emoji-container" v-show="emojiShow">
                <div class="emoji-container">
                  <div class="emoji-content">
                    <ul id="system">
                      <li v-for="item in emoticons" :key="item" @click="chooseEmoji(item)">
                        {{ item }}
                      </li>
                    </ul>
                  </div>
                  <div class="emoji-page">
                    <span class="emoji-page-dot active"></span>
                    <span class="emoji-page-dot"></span>
                  </div>
                  <div class="emoji-icon">
                    <ul>
                      <li class="choose">
                        <svg t="1700469337502" class="icon" viewBox="0 0 1024 1024" version="1.1"
                          xmlns="http://www.w3.org/2000/svg" p-id="30613" width="200" height="200">
                          <path
                            d="M512 959.1c-114.6 0-229.1-43.6-316.3-130.9-174.3-174.4-174.2-458.1 0.2-632.4C298.7 93 445.6 46.6 589 71.5c14.3 2.5 23.9 16.1 21.4 30.4-2.5 14.3-16.1 23.9-30.4 21.4-126.5-22-256.2 19-347 109.7-153.9 153.8-154 404.2-0.2 558.1 153.8 153.9 404.2 154 558.1 0.2s154-404.2 0.2-558.2c-15.4-15.4-32-29.5-49.6-42.1-11.8-8.5-14.5-24.9-6-36.7 8.5-11.8 24.9-14.5 36.7-6 19.8 14.2 38.7 30.3 56.1 47.7 174.3 174.4 174.2 458.1-0.2 632.5-87.1 87-201.6 130.6-316.1 130.6z"
                            p-id="30614"></path>
                          <path d="M312.8 410.7m-42.8 0a42.8 42.8 0 1 0 85.6 0 42.8 42.8 0 1 0-85.6 0Z" p-id="30615">
                          </path>
                          <path d="M715.6 410.9m-42.5 0a42.5 42.5 0 1 0 85 0 42.5 42.5 0 1 0-85 0Z" p-id="30616"></path>
                          <path d="M281.1 553.2v0.4c0 127.5 103.3 231 230.9 231s231-103.3 231-230.9v-0.4l-461.9-0.1z"
                            fill="#FFA786" p-id="30617"></path>
                          <path
                            d="M512 810.9s-0.1 0 0 0c-141.9 0-257.3-115.5-257.2-257.3 0-7.9 3.2-26.2 32.7-26.3h82.4c67.1 0 160.4 0 236.9 0.1l133.6 0.1c28.6 0.1 28.9 26 28.9 26.3-0.1 141.7-115.5 257.1-257.3 257.1zM309 579.8c12.9 100.5 99 178.5 202.9 178.5h0.1c103.9 0 190-77.9 203-178.4-82.1 0-324-0.1-406-0.1z"
                            p-id="30618"></path>
                          <path d="M673.4 124.4m-26.3 0a26.3 26.3 0 1 0 52.6 0 26.3 26.3 0 1 0-52.6 0Z" fill="#FFA786"
                            p-id="30619"></path>
                        </svg>
                      </li>
                      <li>
                        <svg t="1701050127513" class="icon" viewBox="0 0 1024 1024" version="1.1"
                          xmlns="http://www.w3.org/2000/svg" p-id="1409" width="200" height="200">
                          <path
                            d="M512 921.6a64 64 0 0 1-40.32-14.08l-134.826667-106.666667C147.413333 649.813333 69.333333 556.373333 48.64 455.253333a290.986667 290.986667 0 0 1 52.053333-232.533333A279.466667 279.466667 0 0 1 512 183.04a278.4 278.4 0 0 1 188.16-72.32A281.6 281.6 0 0 1 981.333333 391.893333c0 131.2-71.466667 230.186667-293.973333 407.893334l-134.4 106.666666a64 64 0 0 1-40.96 15.146667z m-189.013333-725.333333h-16.213334a190.08 190.08 0 0 0-138.24 77.013333 205.013333 205.013333 0 0 0-36.266666 164.693333c13.226667 64 62.293333 140.16 257.92 295.68L512 830.506667l121.813333-97.28C832 576 896 491.946667 896 391.893333A195.84 195.84 0 0 0 558.933333 256a67.2 67.2 0 0 1-94.08 0 195.413333 195.413333 0 0 0-141.44-59.733333z"
                            fill="#4E4E4E" p-id="1410"></path>
                          <path
                            d="M213.333333 480a42.666667 42.666667 0 0 1-42.666666-42.666667 202.026667 202.026667 0 0 1 153.813333-196.693333 42.666667 42.666667 0 1 1 21.333333 82.773333A117.12 117.12 0 0 0 256 437.333333a42.666667 42.666667 0 0 1-42.666667 42.666667z"
                            fill="#FF9813" p-id="1411"></path>
                        </svg>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <svg t="1700477578248" class="icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="15799" width="200" height="200">
                <path
                  d="M853.333333 896H170.666667a128 128 0 0 1-128-128V256a128 128 0 0 1 128-128h682.666666a128 128 0 0 1 128 128v512a128 128 0 0 1-128 128zM170.666667 213.333333a42.666667 42.666667 0 0 0-42.666667 42.666667v512a42.666667 42.666667 0 0 0 42.666667 42.666667h682.666666a42.666667 42.666667 0 0 0 42.666667-42.666667V256a42.666667 42.666667 0 0 0-42.666667-42.666667z"
                  fill="#4E4E4E" p-id="15800"></path>
                <path
                  d="M282.666667 512m-85.333334 0a85.333333 85.333333 0 1 0 170.666667 0 85.333333 85.333333 0 1 0-170.666667 0Z"
                  fill="#FF9813" p-id="15801"></path>
                <path
                  d="M512 512m-85.333333 0a85.333333 85.333333 0 1 0 170.666666 0 85.333333 85.333333 0 1 0-170.666666 0Z"
                  fill="#FF9813" p-id="15802"></path>
                <path
                  d="M741.333333 512m-85.333333 0a85.333333 85.333333 0 1 0 170.666667 0 85.333333 85.333333 0 1 0-170.666667 0Z"
                  fill="#FF9813" p-id="15803"></path>
              </svg>
            </li>
          </ul>
        </div>
        <div class="chat-send-tool-right">
          <ul>
          </ul>
        </div>
      </div>
      <textarea autofocus></textarea>
    </div>
  </div>
</template>
<script setup lang="ts">
import { ref } from "vue";
import headView from "@/components/headView.vue";
import type { ChatViewProp, MessageProp } from "@/constant/Props";
import useUserStore from "@/store/user";
import { ChatType } from "@/constant/Enums";

const userStore = useUserStore();
const props = defineProps({
  chatViewProp: {
    type: Object as () => ChatViewProp,
    default: {},
  },
});
// 消息样式判断
const msgStyle = (item: MessageProp) => {
  if (item.username === userStore.loginUser?.username) {
    return 'message outgoing'
  } else {
    return 'message incoming'
  }
}
const emojiShow = ref(false)
const showEmoji = () => {
  emojiShow.value = !emojiShow.value
}
// emoji表情
const emoticons = [
  "😀", "😃", "😄", "😁", "😆", "😅", "😉", "😊", "😇", "😍",
  "😘", "😗", "😙", "😚", "😋", "😛", "😜", "🤪", "😝", "🤑",
  "🤗", "🤭", "🤫", "🤔", "🤐", "🤨", "😐", "😑", "😶", "😏",
  "😒", "🙄", "😬", "🤥", "🤢", "🤮", "🤯", "😷", "🥵", "🥶",
  "🥴", "😵", "🤯", "🤠", "🥳", "🥺", "🤤", "🥱", "🤧", "🤡",
  "🤠", "🤕", "🥰", "🥲", "🥺", "🤤", "🥵", "🥶", "🥴", "🥳",
  "🤩", "😎", "🤓", "🧐", "😕", "😟", "🙁", "😮", "😯", "😲",
  "😳", "🥱", "😴", "🤤", "😪", "🥴", "🥵", "🥶", "🤢", "🤮",
  "🤯", "😷", "🥺", "🤧", "🤠", "🤕", "😷", "🤖", "🥸", "🤡",
  "👽", "🤯", "🤑", "🥺", "🧔", "👦", "👨", "👴", "👩", "👵"
]
const chooseEmoji = (item: string) => {
  console.log(item)
}
</script>

<style lang="scss" scoped>
@import "@/assets/components/chatView.scss";
</style>
